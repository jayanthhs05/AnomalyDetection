{% extends "base.html" %}
{% load humanize %}
{% block title %}{{ datasource.alias }} – rows{% endblock %}
{% block content %}
<h2>{{ datasource.alias }}</h2>

<table class="table table-sm table-bordered">
  <thead>
    <tr>
      <th>Timestamp</th>
      <th>Series key</th>
      <th>Processed?</th>
      <th>Anomaly?</th>
      <th>Payload (truncated)</th>
    </tr>
  </thead>
  <tbody>
    {% for row in object_list %}
      <tr class="{% if row.is_anom %}table-danger{% endif %}">
        {% load tz %}
        <td>{{ row.timestamp|localtime }}</td>
        <td>{{ row.series_key }}</td>
        <td>{% if row.has_score %}✓{% else %}&mdash;{% endif %}</td>
        <td>{% if row.is_anom %}<strong>Yes</strong>{% else %}No{% endif %}</td>
        <td><code>{{ row.payload|truncatechars:100 }}</code></td>
      </tr>
    {% endfor %}
  </tbody>
</table>
{% if is_paginated %}
  {% include "pagination.html" %}
{% endif %}
<a href="{% url 'home' %}" class="btn btn-secondary">Back</a>
{% endblock %}
